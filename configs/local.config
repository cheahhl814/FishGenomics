process {
    executor = "local"
    withName:canu
        beforeScript = """
        eval "\$(micromamba shell hook --shell bash)"
        micromamba activate canu
        """
    withName:wtdbg2
        beforeScript = """
        eval "\$(micromamba shell hook --shell bash)"
        micromamba activate wtdbg
        """
    withName:flye
        beforeScript = """
        eval "\$(micromamba shell hook --shell bash)"
        micromamba activate flye
        """
    withName:raven
        beforeScript = """
        eval "\$(micromamba shell hook --shell bash)"
        micromamba activate raven
        """
    withName:shasta
        beforeScript = """
        eval "\$(micromamba shell hook --shell bash)"
        micromamba activate shasta
        """
    withName:racon
        beforeScript = """
        eval "\$(micromamba shell hook --shell bash)"
        micromamba activate racon
        """
    withName:quast
        beforeScript = """
        eval "\$(micromamba shell hook --shell bash)"
        micromamba activate quast
        """
    withName:busoc
        beforeScript = """
        eval "\$(micromamba shell hook --shell bash)"
        micromamba activate busco
        """
    withName:galignment
        beforeScript = """
        eval "\$(micromamba shell hook --shell bash)"
        micromamba activate mummer4
        """
    withName:multiqc
        beforeScript = """
        eval "\$(micromamba shell hook --shell bash)"
        micromamba activate preassembly
        """
    withName:nanoplot
        beforeScript = """
        eval "\$(micromamba shell hook --shell bash)"
        micromamba activate preassembly
        """
    withName:porechop
        beforeScript = """
        eval "\$(micromamba shell hook --shell bash)"
        micromamba activate preassembly
        """
    withName:filtlong
        beforeScript = """
        eval "\$(micromamba shell hook --shell bash)"
        micromamba activate preassembly
        """
    withName:scaffold
        beforeScript = """
        eval "\$(micromamba shell hook --shell bash)"
        micromamba activate reconciliation
        """
    withName:patch
        beforeScript = """
        eval "\$(micromamba shell hook --shell bash)"
        micromamba activate reconciliation
        """
    withName:scaffold2
        beforeScript = """
        eval "\$(micromamba shell hook --shell bash)"
        micromamba activate reconciliation
        """
    withName:quickmerge
        beforeScript = """
        eval "\$(micromamba shell hook --shell bash)"
        micromamba activate reconciliation
        """
    withName:ganonClassify
        beforeScript = """
        eval "\$(micromamba shell hook --shell bash)"
        micromamba activate decon
        """
    withName:decon
        beforeScript = """
        eval "\$(micromamba shell hook --shell bash)"
        micromamba activate decon
        """
    withName:identifymtDNA
        beforeScript = """
        eval "\$(micromamba shell hook --shell bash)"
        micromamba activate decon
        """
    withName:segregateReads
        beforeScript = """
        eval "\$(micromamba shell hook --shell bash)"
        micromamba activate decon
        """
    withName:mtAssembly
        beforeScript = """
        eval "\$(micromamba shell hook --shell bash)"
        micromamba activate flye
        """
    withName:mtPolish
        beforeScript = """
        eval "\$(micromamba shell hook --shell bash)"
        micromamba activate racon
        """
    withName:mtCircular
        beforeScript = """
        eval "\$(micromamba shell hook --shell bash)"
        micromamba activate circlator
        """
}

// Enable conda (micromamba) integration
conda {
    enabled = true
    useMicromamba = true
    cacheDir = "$HOME/micromamba"
    micromambaPath = "$HOME/.local/bin/micromamba"
}
